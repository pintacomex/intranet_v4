function kvLookup(t,e,o,i,n,a){var r=i,l=!1;if(null!=t&&(null!=o&&"object"==typeof o&&t in o?(r=o[t],l=!0):null!=e&&"object"==typeof e&&t in e?(r=e[t],l=!0):r=i,!0===l&&null!=n))switch(n){case"int":r=parseInt(r,10);break;case"float":r=parseFloat(r)}return r}function getColor(t,e,o,i,n){var a,r,l,c,u,f,m,s,g,d,p,v,h,x;i=i||0<n.length;if(0<n.length)for(var b=0;b<n.length;b++)if(t>n[b].lo&&t<=n[b].hi)return n[b].color;if(1===(a=o.length))return o[0];for(r=i?1/a:1/(a-1),l=[],b=0;b<o.length;b++)c=i?r*(b+1):r*b,u=parseInt(cutHex(o[b]).substring(0,2),16),f=parseInt(cutHex(o[b]).substring(2,4),16),m=parseInt(cutHex(o[b]).substring(4,6),16),l[b]={pct:c,color:{r:u,g:f,b:m}};if(0===e)return"rgb("+[l[0].color.r,l[0].color.g,l[0].color.b].join(",")+")";for(var k=0;k<l.length;k++)if(e<=l[k].pct)return i?"rgb("+[l[k].color.r,l[k].color.g,l[k].color.b].join(",")+")":(s=l[k-1],d=(g=l[k]).pct-s.pct,v=1-(p=(e-s.pct)/d),h=p,"rgb("+[(x={r:Math.floor(s.color.r*v+g.color.r*h),g:Math.floor(s.color.g*v+g.color.g*h),b:Math.floor(s.color.b*v+g.color.b*h)}).r,x.g,x.b].join(",")+")")}function setDy(t,e,o){(!ie||9<ie)&&t.node.firstChild.attributes.dy&&(t.node.firstChild.attributes.dy.value=0)}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function cutHex(t){return"#"==t.charAt(0)?t.substring(1,7):t}function humanFriendlyNumber(t,e){var o,i,n,a;for(i=(o=Math.pow)(10,e),n=7;n;)(a=o(10,3*n--))<=t&&(t=Math.round(t*i/a)/i+"KMGTPE"[n]);return t}function formatNumber(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function getStyle(t,e){var o="";return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),o=t.currentStyle[e]),o}function onCreateElementNsReady(t){void 0!==document.createElementNS?t():setTimeout(function(){onCreateElementNsReady(t)},100)}JustGage=function(t){var e,w=this;if(null==t)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;if(null!==t.id&&void 0!==t.id){if(!(e=document.getElementById(t.id)))return console.log("* justgage: No element with id : %s found",t.id),!1}else{if(null===t.parentNode||void 0===t.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;e=t.parentNode}var o,i,n,a,r,l,c,u,f,m,s,g,d,p,v,h,x,b,k,y,F,M,S=e.dataset?e.dataset:{},L=null!==t.defaults&&void 0!==t.defaults&&t.defaults;!1!==L&&delete(t=extend({},t,L)).defaults,w.config={id:t.id,value:kvLookup("value",t,S,0,"float"),defaults:kvLookup("defaults",t,S,0,!1),parentNode:kvLookup("parentNode",t,S,null),width:kvLookup("width",t,S,null),height:kvLookup("height",t,S,null),title:kvLookup("title",t,S,""),titleFontColor:kvLookup("titleFontColor",t,S,"#999999"),titleFontFamily:kvLookup("titleFontFamily",t,S,"sans-serif"),titlePosition:kvLookup("titlePosition",t,S,"above"),valueFontColor:kvLookup("valueFontColor",t,S,"#010101"),valueFontFamily:kvLookup("valueFontFamily",t,S,"Arial"),symbol:kvLookup("symbol",t,S,""),min:kvLookup("min",t,S,0,"float"),max:kvLookup("max",t,S,100,"float"),reverse:kvLookup("reverse",t,S,!1),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",t,S,0),textRenderer:kvLookup("textRenderer",t,S,null),gaugeWidthScale:kvLookup("gaugeWidthScale",t,S,1),gaugeColor:kvLookup("gaugeColor",t,S,"#edebeb"),label:kvLookup("label",t,S,""),labelFontColor:kvLookup("labelFontColor",t,S,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",t,S,.2),shadowSize:kvLookup("shadowSize",t,S,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",t,S,3),levelColors:kvLookup("levelColors",t,S,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",t,S,700),startAnimationType:kvLookup("startAnimationType",t,S,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",t,S,700),refreshAnimationType:kvLookup("refreshAnimationType",t,S,">"),donutStartAngle:kvLookup("donutStartAngle",t,S,90),valueMinFontSize:kvLookup("valueMinFontSize",t,S,16),titleMinFontSize:kvLookup("titleMinFontSize",t,S,10),labelMinFontSize:kvLookup("labelMinFontSize",t,S,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",t,S,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",t,S,10),hideValue:kvLookup("hideValue",t,S,!1),hideMinMax:kvLookup("hideMinMax",t,S,!1),hideInnerShadow:kvLookup("hideInnerShadow",t,S,!1),humanFriendly:kvLookup("humanFriendly",t,S,!1),noGradient:kvLookup("noGradient",t,S,!1),donut:kvLookup("donut",t,S,!1),relativeGaugeSize:kvLookup("relativeGaugeSize",t,S,!1),counter:kvLookup("counter",t,S,!1),decimals:kvLookup("decimals",t,S,0),customSectors:kvLookup("customSectors",t,S,[]),formatNumber:kvLookup("formatNumber",t,S,!1),pointer:kvLookup("pointer",t,S,!1),pointerOptions:kvLookup("pointerOptions",t,S,[])},w.config.value>w.config.max&&(w.config.value=w.config.max),w.config.value<w.config.min&&(w.config.value=w.config.min),w.originalValue=kvLookup("value",t,S,-1,"float"),null!==w.config.id&&null!==document.getElementById(w.config.id)?w.canvas=Raphael(w.config.id,"100%","100%"):null!==w.config.parentNode&&(w.canvas=Raphael(w.config.parentNode,"100%","100%")),!0===w.config.relativeGaugeSize&&w.canvas.setViewBox(0,0,200,150,!0),i=!0===w.config.relativeGaugeSize?(o=200,150):null!==w.config.width&&null!==w.config.height?(o=w.config.width,w.config.height):null!==w.config.parentNode?(w.canvas.setViewBox(0,0,200,150,!0),o=200,150):(o=1*getStyle(document.getElementById(w.config.id),"width").slice(0,-2),1*getStyle(document.getElementById(w.config.id),"height").slice(0,-2)),M=(F=(y=!0===w.config.donut?(i<o?n=a=i:o<i?i<(a=n=o)&&(n=(a/=r=a/i)/r):a=n=o,u=10<a/8?a/10:10,m=(c=(i-a)/2)+a/11,s=16<a/6.4?a/5.4:18,v=g=f=(l=(o-n)/2)+n/2,h=(d=""!==w.config.label?c+a/1.85:c+a/1.7)+(p=10<a/16?a/16:10),x=10<a/16?a/16:10,b=l+n/10+n/6.666666666666667*w.config.gaugeWidthScale/2,k=h,10<a/16?a/16:10):(i<o?o<(n=1.25*(a=i))&&(n/=r=n/o,a/=r):o<i?i<(a=(n=o)/1.25)&&(n=(a/=r=a/i)/r):a=.75*(n=o),l=(o-n)/2,c=(i-a)/2,"below"===w.config.titlePosition&&(c-=a/6.4),u=a/8>w.config.titleMinFontSize?a/10:w.config.titleMinFontSize,f=l+n/2,m=c+("below"===w.config.titlePosition?1.07*a:a/6.4),s=a/6.5>w.config.valueMinFontSize?a/6.5:w.config.valueMinFontSize,g=l+n/2,d=c+a/1.275,p=a/16>w.config.labelMinFontSize?a/16:w.config.labelMinFontSize,v=l+n/2,h=d+s/2+5,x=a/16>w.config.minLabelMinFontSize?a/16:w.config.minLabelMinFontSize,b=l+n/10+n/6.666666666666667*w.config.gaugeWidthScale/2,k=h,a/16>w.config.maxLabelMinFontSize?a/16:w.config.maxLabelMinFontSize),l+n-n/10-n/6.666666666666667*w.config.gaugeWidthScale/2),h),w.params={canvasW:o,canvasH:i,widgetW:n,widgetH:a,dx:l,dy:c,titleFontSize:u,titleX:f,titleY:m,valueFontSize:s,valueX:g,valueY:d,labelFontSize:p,labelX:v,labelY:h,minFontSize:x,minX:b,minY:k,maxFontSize:y,maxX:F,maxY:M},M=null,w.canvas.customAttributes.pki=function(t,e,o,i,n,a,r,l,c,u){var f,m,s,g,d,p;return c?(f=(1-2*(t-e)/(o-e))*Math.PI,p="M"+((g=i/2+a)-(s=(m=i/2-i/7)-i/6.666666666666667*l))+","+(d=n/1.95+r)+" ",p+="L"+(g-m)+","+d+" ",(o-e)/2<t&&(p+="A"+m+","+m+" 0 0 1 "+(g+m)+","+d+" "),p+="A"+m+","+m+" 0 0 1 "+(i/2+a+m*Math.cos(f))+","+(n-(n-d)-m*Math.sin(f))+" ",p+="L"+(i/2+a+s*Math.cos(f))+","+(n-(n-d)-s*Math.sin(f))+" ",(o-e)/2<t&&(p+="A"+s+","+s+" 0 0 0 "+(g+s)+","+d+" ")):(f=(1-(t-e)/(o-e))*Math.PI,p="M"+((g=i/2+a)-(s=(m=i/2-i/10)-i/6.666666666666667*l))+","+(d=n/1.25+r)+" ",p+="L"+(g-m)+","+d+" ",p+="A"+m+","+m+" 0 0 1 "+(i/2+a+m*Math.cos(f))+","+(n-(n-d)-m*Math.sin(f))+" ",p+="L"+(i/2+a+s*Math.cos(f))+","+(n-(n-d)-s*Math.sin(f))+" "),p+="A"+s+","+s+" 0 0 0 "+(g-s)+","+d+" ",{path:p+="Z "}},w.canvas.customAttributes.ndl=function(t,e,o,i,n,a,r,l,c){var u,f,m,s,g,d,p,v,h,x,b,k,y,F=3.5*i/100,M=i/15,S=i/100;return null!=w.config.pointerOptions.toplength&&null!=w.config.pointerOptions.toplength&&(F=w.config.pointerOptions.toplength),null!=w.config.pointerOptions.bottomlength&&null!=w.config.pointerOptions.bottomlength&&(M=w.config.pointerOptions.bottomlength),null!=w.config.pointerOptions.bottomwidth&&null!=w.config.pointerOptions.bottomwidth&&(S=w.config.pointerOptions.bottomwidth),y=(k=(b=(x=(h=(v=(p=(d=(g=(s=c?(u=(1-2*(t-e)/(o-e))*Math.PI,m=(f=i/2-i/7)-i/6.666666666666667*l,n/1.95+r):(u=(1-(t-e)/(o-e))*Math.PI,m=(f=i/2-i/10)-i/6.666666666666667*l,n/1.25+r),i/2+a+f*Math.cos(u)),n-(n-s)-f*Math.sin(u)),i/2+a+m*Math.cos(u)),n-(n-s)-m*Math.sin(u)),g+F*Math.cos(u)),d-F*Math.sin(u)),p-M*Math.cos(u)),v+M*Math.sin(u)),"M"+(b+S*Math.sin(u))+","+(k+S*Math.cos(u))+" "),y+="L"+(b-S*Math.sin(u))+","+(k-S*Math.cos(u))+" ",y+="L"+h+","+x+" ",{path:y+="Z "}},w.gauge=w.canvas.path().attr({stroke:"none",fill:w.config.gaugeColor,pki:[w.config.max,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut,w.config.reverse]}),w.level=w.canvas.path().attr({stroke:"none",fill:getColor(w.config.value,(w.config.value-w.config.min)/(w.config.max-w.config.min),w.config.levelColors,w.config.noGradient,w.config.customSectors),pki:[w.config.min,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut,w.config.reverse]}),w.config.donut&&w.level.transform("r"+w.config.donutStartAngle+", "+(w.params.widgetW/2+w.params.dx)+", "+(w.params.widgetH/1.95+w.params.dy)),w.config.pointer&&(w.needle=w.canvas.path().attr({stroke:null!==w.config.pointerOptions.stroke&&void 0!==w.config.pointerOptions.stroke?w.config.pointerOptions.stroke:"none","stroke-width":null!==w.config.pointerOptions.stroke_width&&void 0!==w.config.pointerOptions.stroke_width?w.config.pointerOptions.stroke_width:0,"stroke-linecap":null!==w.config.pointerOptions.stroke_linecap&&void 0!==w.config.pointerOptions.stroke_linecap?w.config.pointerOptions.stroke_linecap:"square",fill:null!==w.config.pointerOptions.color&&void 0!==w.config.pointerOptions.color?w.config.pointerOptions.color:"#000000",ndl:[w.config.min,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut]}),w.config.donut&&w.needle.transform("r"+w.config.donutStartAngle+", "+(w.params.widgetW/2+w.params.dx)+", "+(w.params.widgetH/1.95+w.params.dy))),w.txtTitle=w.canvas.text(w.params.titleX,w.params.titleY,w.config.title),w.txtTitle.attr({"font-size":w.params.titleFontSize,"font-weight":"bold","font-family":w.config.titleFontFamily,fill:w.config.titleFontColor,"fill-opacity":"1"}),setDy(w.txtTitle,w.params.titleFontSize,w.params.titleY),w.txtValue=w.canvas.text(w.params.valueX,w.params.valueY,0),w.txtValue.attr({"font-size":w.params.valueFontSize,"font-weight":"bold","font-family":w.config.valueFontFamily,fill:w.config.valueFontColor,"fill-opacity":"0"}),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY),w.txtLabel=w.canvas.text(w.params.labelX,w.params.labelY,w.config.label),w.txtLabel.attr({"font-size":w.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:w.config.labelFontColor,"fill-opacity":"0"}),setDy(w.txtLabel,w.params.labelFontSize,w.params.labelY);var A=w.config.min;w.config.reverse&&(A=w.config.max),w.txtMinimum=A,w.config.humanFriendly?w.txtMinimum=humanFriendlyNumber(A,w.config.humanFriendlyDecimal):w.config.formatNumber&&(w.txtMinimum=formatNumber(A)),w.txtMin=w.canvas.text(w.params.minX,w.params.minY,w.txtMinimum),w.txtMin.attr({"font-size":w.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:w.config.labelFontColor,"fill-opacity":w.config.hideMinMax||w.config.donut?"0":"1"}),setDy(w.txtMin,w.params.minFontSize,w.params.minY);var z=w.config.max;w.config.reverse&&(z=w.config.min),w.txtMaximum=z,w.config.humanFriendly?w.txtMaximum=humanFriendlyNumber(z,w.config.humanFriendlyDecimal):w.config.formatNumber&&(w.txtMaximum=formatNumber(z)),w.txtMax=w.canvas.text(w.params.maxX,w.params.maxY,w.txtMaximum),w.txtMax.attr({"font-size":w.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:w.config.labelFontColor,"fill-opacity":w.config.hideMinMax||w.config.donut?"0":"1"}),setDy(w.txtMax,w.params.maxFontSize,w.params.maxY);var N=w.canvas.canvas.childNodes[1],C="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){w.generateShadow(C,N)}):w.generateShadow(C,N)),C=null,w.config.textRenderer?w.originalValue=w.config.textRenderer(w.originalValue):w.config.humanFriendly?w.originalValue=humanFriendlyNumber(w.originalValue,w.config.humanFriendlyDecimal)+w.config.symbol:w.config.formatNumber?w.originalValue=formatNumber(w.originalValue)+w.config.symbol:w.originalValue=(1*w.originalValue).toFixed(w.config.decimals)+w.config.symbol,!0===w.config.counter?(eve.on("raphael.anim.frame."+w.level.id,function(){var t=w.level.attr("pki")[0];w.config.reverse&&(t=1*w.config.max+1*w.config.min-1*w.level.attr("pki")[0]),w.config.textRenderer?w.txtValue.attr("text",w.config.textRenderer(Math.floor(t))):w.config.humanFriendly?w.txtValue.attr("text",humanFriendlyNumber(Math.floor(t),w.config.humanFriendlyDecimal)+w.config.symbol):w.config.formatNumber?w.txtValue.attr("text",formatNumber(Math.floor(t))+w.config.symbol):w.txtValue.attr("text",(1*t).toFixed(w.config.decimals)+w.config.symbol),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY),t=null}),eve.on("raphael.anim.finish."+w.level.id,function(){w.txtValue.attr({text:w.originalValue}),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY)})):eve.on("raphael.anim.start."+w.level.id,function(){w.txtValue.attr({text:w.originalValue}),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY)});var V=w.config.value;w.config.reverse&&(V=1*w.config.max+1*w.config.min-1*w.config.value),w.level.animate({pki:[V,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut,w.config.reverse]},w.config.startAnimationTime,w.config.startAnimationType),w.config.pointer&&w.needle.animate({ndl:[V,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut]},w.config.startAnimationTime,w.config.startAnimationType),w.txtValue.animate({"fill-opacity":w.config.hideValue?"0":"1"},w.config.startAnimationTime,w.config.startAnimationType),w.txtLabel.animate({"fill-opacity":"1"},w.config.startAnimationTime,w.config.startAnimationType)},JustGage.prototype.refresh=function(t,e){var o,i,n=this;null!==(e=e||null)&&(n.config.max=e,n.txtMaximum=n.config.max,n.config.humanFriendly?n.txtMaximum=humanFriendlyNumber(n.config.max,n.config.humanFriendlyDecimal):n.config.formatNumber&&(n.txtMaximum=formatNumber(n.config.max)),n.config.reverse?(n.txtMin.attr({text:n.txtMaximum}),setDy(n.txtMin,n.params.minFontSize,n.params.minY)):(n.txtMax.attr({text:n.txtMaximum}),setDy(n.txtMax,n.params.maxFontSize,n.params.maxY))),1*(o=t)>1*n.config.max&&(t=1*n.config.max),1*t<1*n.config.min&&(t=1*n.config.min),i=getColor(t,(t-n.config.min)/(n.config.max-n.config.min),n.config.levelColors,n.config.noGradient,n.config.customSectors),o=n.config.textRenderer?n.config.textRenderer(o):n.config.humanFriendly?humanFriendlyNumber(o,n.config.humanFriendlyDecimal)+n.config.symbol:n.config.formatNumber?formatNumber((1*o).toFixed(n.config.decimals))+n.config.symbol:(1*o).toFixed(n.config.decimals)+n.config.symbol,n.originalValue=o,n.config.value=1*t,n.config.counter||(n.txtValue.attr({text:o}),setDy(n.txtValue,n.params.valueFontSize,n.params.valueY));var a=n.config.value;n.config.reverse&&(a=1*n.config.max+1*n.config.min-1*n.config.value),n.level.animate({pki:[a,n.config.min,n.config.max,n.params.widgetW,n.params.widgetH,n.params.dx,n.params.dy,n.config.gaugeWidthScale,n.config.donut,n.config.reverse],fill:i},n.config.refreshAnimationTime,n.config.refreshAnimationType),n.config.pointer&&n.needle.animate({ndl:[a,n.config.min,n.config.max,n.params.widgetW,n.params.widgetH,n.params.dx,n.params.dy,n.config.gaugeWidthScale,n.config.donut]},n.config.refreshAnimationTime,n.config.refreshAnimationType),e=null},JustGage.prototype.generateShadow=function(t,e){var o,i,n,a,r,l,c,u=this,f="inner-shadow-"+u.config.id;(o=document.createElementNS(t,"filter")).setAttribute("id",f),e.appendChild(o),(i=document.createElementNS(t,"feOffset")).setAttribute("dx",0),i.setAttribute("dy",u.config.shadowVerticalOffset),o.appendChild(i),(n=document.createElementNS(t,"feGaussianBlur")).setAttribute("result","offset-blur"),n.setAttribute("stdDeviation",u.config.shadowSize),o.appendChild(n),(a=document.createElementNS(t,"feComposite")).setAttribute("operator","out"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","offset-blur"),a.setAttribute("result","inverse"),o.appendChild(a),(r=document.createElementNS(t,"feFlood")).setAttribute("flood-color","black"),r.setAttribute("flood-opacity",u.config.shadowOpacity),r.setAttribute("result","color"),o.appendChild(r),(l=document.createElementNS(t,"feComposite")).setAttribute("operator","in"),l.setAttribute("in","color"),l.setAttribute("in2","inverse"),l.setAttribute("result","shadow"),o.appendChild(l),(c=document.createElementNS(t,"feComposite")).setAttribute("operator","over"),c.setAttribute("in","shadow"),c.setAttribute("in2","SourceGraphic"),o.appendChild(c),u.config.hideInnerShadow||(u.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+f+")"),u.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+f+")")),c=null};var ie=function(){for(var t=3,e=document.createElement("div"),o=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",o[0];);return 4<t?t:void 0}();function extend(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var o in arguments[e])arguments[e].hasOwnProperty(o)&&(t[o]=arguments[e][o]);return t}